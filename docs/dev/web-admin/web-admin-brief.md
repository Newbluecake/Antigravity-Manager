# Web 管理后台 - 需求简报

> **生成时间**: 2026-01-12
> **访谈轮次**: 第 2 轮
> **细节级别**: standard
> **版本**: v1.0 Final

## 1. 一句话描述

为 Antigravity Manager 桌面应用添加独立的 Web 管理后台，支持局域网内通过浏览器访问应用的监控、控制、用户管理和数据管理功能。

## 2. 目标用户

- **主要用户**: 需要远程管理 Antigravity Manager 的开发者和高级用户
- **使用场景**: 局域网内从其他设备（手机、平板、其他电脑）访问和管理应用

## 3. 核心场景（Top 4）

### 场景 1: 实时监控应用状态
- **触发**: 用户在浏览器中打开 Web 管理后台
- **结果**: 显示应用运行状态、代理服务状态、账号配额概览、API 请求统计等实时信息

### 场景 2: 远程控制应用
- **触发**: 用户在 Web 界面中点击启动/停止代理服务、修改配置参数
- **结果**: 系统执行相应操作并返回结果，桌面应用状态同步更新

### 场景 3: 用户认证登录
- **触发**: 用户首次访问 Web 管理后台
- **结果**: 显示登录页面，用户输入凭证后获得 JWT Token，后续请求携带 Token 访问

### 场景 4: 查看和管理数据
- **触发**: 用户在 Web 界面中查看账号列表、API 监控日志、配额详情
- **结果**: 系统从数据库读取数据并展示，支持筛选、排序、导出等操作

## 4. 关键需求点

**必须有 (P0)**:
- [ ] 独立的 Web 服务器（基于 Axum，独立端口）
- [ ] Token 认证机制（JWT）
- [ ] 实时监控仪表盘（应用状态、代理状态、配额概览）
- [ ] 基础的应用控制（启动/停止代理服务、查看日志）
- [ ] 响应式 Web UI（支持桌面和移动端）
- [ ] 局域网访问支持（监听 0.0.0.0）

**应该有 (P1)**:
- [ ] 账号管理功能（查看账号列表、配额详情、禁用/启用账号）
- [ ] API 监控日志查询（分页、筛选、详情查看）
- [ ] 配置管理（修改代理端口、调度模式等基础配置）
- [ ] WebSocket 实时推送（状态变化、日志更新）

**可以有 (P2)**:
- [ ] 用户权限管理（多用户、角色分配）
- [ ] 高级配置管理（模型映射、自定义路由）
- [ ] 数据导出功能（CSV、JSON）

## 5. 明确不做

- **不做公网访问**: 仅支持局域网访问，不提供公网穿透或云端同步
- **不做完整的桌面功能复刻**: Web 后台仅提供核心管理功能，不替代桌面应用的完整功能
- **不做复杂的权限系统**: MVP 阶段仅支持单用户 Token 认证，不做 RBAC
- **不做数据双向同步**: Web 后台作为只读/控制接口，不支持复杂的数据编辑（如添加账号、修改映射规则）

## 6. 关键风险

- **端口冲突**: 新 Web 服务需要独立端口，需避免与现有代理端口冲突 → 提供配置项，默认使用 8046
- **认证安全**: 局域网环境下的 Token 安全性 → 使用 HTTPS（可选）+ 强密码策略 + Token 过期机制
- **性能影响**: 新增 Web 服务可能影响桌面应用性能 → 使用独立线程池，限制并发连接数
- **代码复杂度**: 需要与现有 modules/proxy/db 模块深度集成 → 采用清晰的模块边界，复用现有逻辑

## 7. 下一步

✅ **确认 Brief 后，查看完整 Requirements**:
`docs/dev/web-admin/web-admin-requirements.md`

✅ **在新会话中执行**:
```bash
/dev:spec-dev web-admin --skip-requirements
```

这将基于 requirements.md 进行：
1. 技术设计
2. 任务拆分
3. TDD 实施
